{
    "module_name": "Creative Ads Builder",
    "description": "Multi-step flow for creating AI-powered advertisement creatives with product images, brand assets, and platform-specific templates",
    "version": "1.0.0",
    "flow_steps": [
        {
            "step": 1,
            "route": "/creative-builder/upload",
            "name": "Upload",
            "description": "User uploads product image and adds optional brand assets",
            "ui_components": {
                "image_upload": {
                    "type": "file_upload",
                    "accept": [
                        "image/jpeg",
                        "image/png",
                        "image/webp"
                    ],
                    "max_size_mb": 10,
                    "required": true
                },
                "product_url": {
                    "type": "text_input",
                    "description": "Optional URL from Shopify, Amazon, etc.",
                    "required": false,
                    "placeholder": "https://www.example.com/product"
                },
                "brand_assets": {
                    "type": "asset_upload",
                    "description": "Logo, brand colors, fonts",
                    "required": true,
                    "fields": {
                        "logo": {
                            "type": "file_upload",
                            "accept": [
                                "image/png",
                                "image/svg"
                            ],
                            "required": false
                        },
                        "brand_colors": {
                            "type": "color_array",
                            "max_colors": 5,
                            "required": false
                        },
                        "fonts": {
                            "type": "font_array",
                            "max_fonts": 2,
                            "required": false
                        }
                    }
                },
                "product_name": {
                    "type": "text_input",
                    "description": "Product name for better targeting",
                    "required": true,
                    "max_length": 100,
                    "placeholder": "Premium Cotton T-Shirt"
                }
            },
            "validation": {
                "required_fields": [
                    "image_upload",
                    "brand_assets",
                    "product_name"
                ],
                "error_handling": {
                    "missing_image": "Please upload a product image",
                    "missing_brand_assets": "Please add your brand assets",
                    "missing_product_name": "Please enter a product name"
                }
            },
            "api_endpoint": {
                "method": "POST",
                "path": "/api/creative-builder/upload",
                "request_body": {
                    "product_image": "File (multipart/form-data)",
                    "product_url": "string | null",
                    "product_name": "string",
                    "brand_assets": {
                        "logo": "File | null",
                        "brand_colors": "string[]",
                        "fonts": "string[]"
                    }
                },
                "response": {
                    "success": {
                        "upload_id": "string (UUID)",
                        "image_url": "string",
                        "message": "Upload successful"
                    },
                    "error": {
                        "code": "number",
                        "message": "string",
                        "details": "object"
                    }
                }
            }
        },
        {
            "step": 2,
            "route": "/creative-builder/goals",
            "name": "Configure Ad Offer",
            "description": "User configures pricing, offers, and selects platform template",
            "ui_components": {
                "pricing_section": {
                    "product_price": {
                        "type": "currency_input",
                        "currency": "USD",
                        "required": false,
                        "placeholder": "0.00"
                    },
                    "special_offer": {
                        "type": "text_input",
                        "description": "e.g., 50% OFF, Buy 1 Get 1",
                        "required": false,
                        "max_length": 50,
                        "placeholder": "50% OFF"
                    },
                    "offer_price": {
                        "type": "currency_input",
                        "currency": "USD",
                        "required": false,
                        "placeholder": "0.00"
                    }
                },
                "platform_selection": {
                    "type": "single_select",
                    "required": true,
                    "default": "ig",
                    "options": [
                        {
                            "id": "gg",
                            "name": "Google Ads",
                            "aspect_ratio": "1:1",
                            "recommended_dimensions": "1200x1200",
                            "color": "#4285F4"
                        },
                        {
                            "id": "ig",
                            "name": "Instagram Ads",
                            "aspect_ratio": "4:5",
                            "recommended_dimensions": "1080x1350",
                            "color": "#E4405F"
                        },
                        {
                            "id": "fb",
                            "name": "Facebook Ads",
                            "aspect_ratio": "1:1",
                            "recommended_dimensions": "1200x1200",
                            "color": "#1877F2"
                        },
                        {
                            "id": "sm",
                            "name": "Social Media",
                            "aspect_ratio": "1:1",
                            "recommended_dimensions": "1080x1080",
                            "color": "#8B5CF6"
                        }
                    ]
                }
            },
            "api_endpoint": {
                "method": "POST",
                "path": "/api/creative-builder/configure",
                "request_body": {
                    "upload_id": "string (UUID)",
                    "product_price": "number | null",
                    "special_offer": "string | null",
                    "offer_price": "number | null",
                    "selected_platform": "string (gg|ig|fb|sm)"
                },
                "response": {
                    "success": {
                        "configuration_id": "string (UUID)",
                        "message": "Configuration saved"
                    },
                    "error": {
                        "code": "number",
                        "message": "string"
                    }
                }
            }
        },
        {
            "step": 3,
            "route": "/creative-builder/edit",
            "name": "Edit & Customize",
            "description": "User edits creative elements and generates AI captions",
            "ui_components": {
                "brand_settings": {
                    "headline": {
                        "type": "textarea",
                        "required": true,
                        "max_length": 150,
                        "default": "Elevate Your Style",
                        "rows": 2
                    },
                    "cta_label": {
                        "type": "text_input",
                        "required": true,
                        "max_length": 30,
                        "default": "Shop Now",
                        "suggestions": [
                            "Shop Now",
                            "Learn More",
                            "Buy Now",
                            "Get Started",
                            "Discover"
                        ]
                    }
                },
                "visual_styles": {
                    "colors": {
                        "type": "color_picker",
                        "description": "Custom color palette",
                        "required": false
                    },
                    "fonts": {
                        "type": "font_selector",
                        "description": "Typography selection",
                        "required": false
                    },
                    "overlay": {
                        "type": "layout_selector",
                        "description": "Text overlay layouts",
                        "required": false
                    },
                    "ai_filter": {
                        "type": "filter_selector",
                        "description": "AI-powered visual effects",
                        "required": false
                    }
                },
                "smart_caption": {
                    "tone_selection": {
                        "type": "single_select",
                        "required": true,
                        "default": "Professional",
                        "options": [
                            "Storyteller",
                            "Professional",
                            "Sales",
                            "Viral",
                            "Casual",
                            "Luxury"
                        ]
                    },
                    "caption_generation": {
                        "type": "ai_generated",
                        "includes_hashtags": true,
                        "max_length": 280
                    }
                }
            },
            "api_endpoints": {
                "generate_caption": {
                    "method": "POST",
                    "path": "/api/creative-builder/generate-caption",
                    "request_body": {
                        "configuration_id": "string (UUID)",
                        "tone": "string",
                        "product_name": "string",
                        "platform": "string"
                    },
                    "response": {
                        "success": {
                            "caption": "string",
                            "hashtags": "string[]",
                            "generation_id": "string (UUID)"
                        },
                        "error": {
                            "code": "number",
                            "message": "string"
                        }
                    }
                },
                "update_creative": {
                    "method": "PUT",
                    "path": "/api/creative-builder/update",
                    "request_body": {
                        "configuration_id": "string (UUID)",
                        "headline": "string",
                        "cta_label": "string",
                        "visual_styles": {
                            "colors": "string[] | null",
                            "fonts": "string[] | null",
                            "overlay": "string | null",
                            "filter": "string | null"
                        },
                        "caption": "string | null"
                    },
                    "response": {
                        "success": {
                            "updated": true,
                            "preview_url": "string"
                        },
                        "error": {
                            "code": "number",
                            "message": "string"
                        }
                    }
                }
            }
        },
        {
            "step": 4,
            "route": "/creative-builder/export",
            "name": "Export (Disabled)",
            "description": "Final export page - currently commented out in code",
            "status": "inactive",
            "note": "This step exists in the flow structure but is currently disabled in the UI"
        }
    ],
    "global_state_management": {
        "context_provider": "CreativeBuilderContext",
        "shared_state": {
            "currentStep": "UPLOAD | GOALS | EDITOR | EXPORT",
            "uploadedImage": "string | null",
            "offer": "string",
            "price": "string",
            "offerPrice": "string",
            "selectedPlatform": "string",
            "uploadId": "string (UUID)",
            "configurationId": "string (UUID)",
            "balance": "number (from WalletContext)",
            "freeCredits": "number (from WalletContext)"
        }
    },
    "navigation_flow": {
        "entry_point": "/creative-builder (redirects to /upload)",
        "step_sequence": [
            "/creative-builder/upload",
            "/creative-builder/goals",
            "/creative-builder/edit"
        ],
        "navigation_rules": {
            "can_go_back": true,
            "can_skip_forward": false,
            "validation_required": true
        }
    },
    "integration_requirements": {
        "authentication": {
            "required": true,
            "method": "JWT Bearer Token",
            "header": "Authorization: Bearer <token>"
        },
        "file_storage": {
            "provider": "To be determined (S3/CloudFlare/etc)",
            "upload_path": "/uploads/creative-builder/{user_id}/{upload_id}/",
            "max_retention_days": 30
        },
        "ai_services": {
            "caption_generation": {
                "provider": "OpenAI/Anthropic/Custom",
                "model": "To be determined",
                "parameters": {
                    "tone": "string",
                    "product_context": "string",
                    "platform": "string"
                }
            },
            "image_processing": {
                "provider": "To be determined",
                "operations": [
                    "resize",
                    "crop",
                    "filter",
                    "overlay"
                ]
            }
        }
    },
    "data_models": {
        "CreativeProject": {
            "id": "UUID",
            "user_id": "UUID (FK)",
            "upload_id": "UUID",
            "configuration_id": "UUID",
            "product_image_url": "string",
            "product_name": "string",
            "product_url": "string | null",
            "brand_assets": {
                "logo_url": "string | null",
                "colors": "string[]",
                "fonts": "string[]"
            },
            "pricing": {
                "product_price": "number | null",
                "special_offer": "string | null",
                "offer_price": "number | null"
            },
            "platform": "string",
            "creative_content": {
                "headline": "string",
                "cta": "string",
                "caption": "string | null",
                "hashtags": "string[]"
            },
            "visual_settings": {
                "colors": "string[] | null",
                "fonts": "string[] | null",
                "overlay": "string | null",
                "filter": "string | null"
            },
            "status": "draft | in_progress | completed",
            "created_at": "timestamp",
            "updated_at": "timestamp",
            "completed_at": "timestamp | null"
        },
        "GeneratedCaption": {
            "id": "UUID",
            "project_id": "UUID (FK)",
            "tone": "string",
            "caption_text": "string",
            "hashtags": "string[]",
            "platform": "string",
            "created_at": "timestamp"
        }
    },
    "error_handling": {
        "validation_errors": {
            "E001": "Missing required field: product_image",
            "E002": "Missing required field: brand_assets",
            "E003": "Missing required field: product_name",
            "E004": "Invalid file type",
            "E005": "File size exceeds limit",
            "E006": "Invalid platform selection"
        },
        "server_errors": {
            "E100": "Upload failed - storage error",
            "E101": "AI caption generation failed",
            "E102": "Image processing failed",
            "E103": "Configuration save failed"
        },
        "authentication_errors": {
            "E200": "User not authenticated",
            "E201": "Insufficient credits",
            "E202": "Token expired"
        }
    },
    "performance_requirements": {
        "upload_response_time": "< 2 seconds",
        "caption_generation_time": "< 3 seconds",
        "image_processing_time": "< 5 seconds",
        "max_concurrent_uploads": 100,
        "rate_limiting": {
            "uploads_per_minute": 10,
            "caption_generations_per_minute": 20
        }
    },
    "notes_for_backend_team": [
        "The export step (/creative-builder/export) is currently disabled in the UI but should be implemented in the backend for future use",
        "Brand assets upload is required but individual fields (logo, colors, fonts) are optional within it",
        "Product URL is optional - it's for importing metadata from e-commerce platforms",
        "Platform selection affects the aspect ratio and recommended dimensions for the final creative",
        "Caption generation should consider the selected platform for hashtag optimization",
        "Visual styles (colors, fonts, overlay, filter) are currently UI placeholders - backend implementation needed",
        "The module integrates with the global WalletContext for credits/balance management",
        "All API calls should include user authentication via JWT",
        "Consider implementing WebSocket for real-time AI generation progress updates",
        "Implement draft auto-save functionality to prevent data loss"
    ]
}