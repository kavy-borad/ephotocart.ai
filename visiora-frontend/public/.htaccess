<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # 1. REMOVE .html EXTENSION
  # If a request comes in for /page.html, redirect it to /page (External Redirect)
  RewriteCond %{THE_REQUEST} \s/+(.+?)\.html(\s|\?) [NC]
  RewriteRule ^ /%1 [R=301,L]

  # 2. INTERNAL REWRITE
  # If the request is for /page, internally serve /page.html (Internal Rewrite)
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME}\.html -f
  RewriteRule ^(.*)$ $1.html [L]

  # 3. NEXT.JS STATIC ROUTES (Optional but specific to Visiora structure)
  # Handle specific nested routes if the above generic rule misses them
  RewriteRule ^dashboard$ dashboard.html [L]
  RewriteRule ^generate$ generate.html [L]
  RewriteRule ^gallery$ gallery.html [L]
  RewriteRule ^wallet$ wallet.html [L]
  RewriteRule ^login$ login.html [L]
  RewriteRule ^register$ register.html [L]
  RewriteRule ^settings$ settings.html [L]

  # 4. ERROR PAGES
  # Use the custom 404 page generated by Next.js
  ErrorDocument 404 /404.html
</IfModule>

# Optional: Force HTTPS (if your server doesn't do it automatically)
<IfModule mod_rewrite.c>
  RewriteCond %{HTTPS} off
  RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</IfModule>
